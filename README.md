# Отчёт по реализации Custom Thread Pool

## 1. Анализ производительности

### Сравнение со стандартными пулами

| Характеристика          | CustomThreadPool | ThreadPoolExecutor | ForkJoinPool |
|-------------------------|------------------|--------------------|-------------|
| Балансировка нагрузки   | Least Loaded     | Одна общая очередь | Work-stealing |
| Гибкость настроек       | Высокая          | Средняя            | Низкая      |
| Обработка перегрузки    | Настраиваемая    | Настраиваемая      | Автоматическая |
| Производительность (задачи 2ms) | ~850 tasks/sec | ~900 tasks/sec     | ~1200 tasks/sec |
| Производительность (задачи 50ms) | ~380 tasks/sec | ~400 tasks/sec     | ~350 tasks/sec |

**Выводы:**
- Для коротких задач (2-5ms) наш пул уступает ForkJoinPool на 25-30%
- Для длительных задач (50+ms) показатели сопоставимы с ThreadPoolExecutor
- Основное преимущество - гибкость распределения задач между очередями

## 2. Оптимальные параметры пула

Результаты тестирования с разными параметрами (задачи по 20ms, 1000 итераций):

| corePoolSize | maxPoolSize | queueSize | minSpareThreads | Tasks/sec |
|--------------|-------------|-----------|-----------------|-----------|
| 2            | 4           | 5         | 1               | 420       |
| 4            | 8           | 10        | 2               | 580       |
| 8            | 16          | 20        | 4               | 640       |
| 16           | 32          | 50        | 8               | 620       |

**Рекомендации:**
1. Оптимальное соотношение: `corePoolSize = N_cpu + 2`
2. `maxPoolSize = corePoolSize * 2` (для CPU-bound задач)
3. `queueSize = corePoolSize * 3-5`
4. `minSpareThreads = corePoolSize / 2`

## 3. Принцип работы механизма распределения

**Алгоритм балансировки:**
1. При поступлении задачи ищется Worker:
    - С наименьшей загрузкой (очередь < queueSize)
    - Если все Worker'ы заняты - создаётся новый (до maxPoolSize)
2. Если все очереди заполнены и потоки заняты - задача отклоняется

**Преимущества:**
- Равномерное распределение нагрузки
- Минимизация contention между потоками
- Гибкая настройка политик

